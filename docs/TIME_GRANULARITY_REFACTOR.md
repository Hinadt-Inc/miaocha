# 时间分组智能计算使用手册

## 功能说明

秒查系统支持自动选择最佳时间分组间隔，让数据可视化效果更佳。

## 基本用法

|     参数名称      |  设置值   |      说明      |
|---------------|--------|--------------|
| timeGrouping  | "auto" | 启用自动计算       |
| targetBuckets | 数字（可选） | 目标数据点数量，默认50 |
| startTime     | 时间字符串  | 查询开始时间       |
| endTime       | 时间字符串  | 查询结束时间       |

## 自动计算效果表

| 查询时间范围 | 自动选择间隔 | 数据点数量 |  适合场景  |
|--------|--------|-------|--------|
| 最近5分钟  | 每5秒    | 60个点  | 实时监控   |
| 最近30分钟 | 每30秒   | 60个点  | 短期监控   |
| 最近1小时  | 每1分钟   | 60个点  | 小时级分析  |
| 最近6小时  | 每10分钟  | 36个点  | 工作时段分析 |
| 最近1天   | 每30分钟  | 48个点  | 日常分析   |
| 最近1周   | 每3小时   | 56个点  | 周度趋势   |
| 最近1个月  | 每12小时  | 60个点  | 月度报表   |

## 精度控制表

| targetBuckets值 |  效果  |   1小时查询    |    1天查询    |
|----------------|------|------------|------------|
| 20             | 粗粒度  | 每2分钟，30个点  | 每1小时，24个点  |
| 50（默认）         | 标准精度 | 每1分钟，60个点  | 每30分钟，48个点 |
| 100            | 高精度  | 每30秒，120个点 | 每15分钟，96个点 |

## 返回字段说明

|       字段名称        |   说明   |       示例值       |
|-------------------|--------|-----------------|
| timeUnit          | 时间单位   | minute          |
| timeInterval      | 间隔数值   | 5               |
| estimatedBuckets  | 预计数据点数 | 48              |
| actualBuckets     | 实际数据点数 | 45              |
| calculationMethod | 计算方式   | AUTO_CALCULATED |

## 使用场景对照表

|   场景   | timeGrouping | targetBuckets |      效果       |
|--------|--------------|---------------|---------------|
| 实时大屏监控 | auto         | 60            | 每15秒一个点，更新频繁  |
| 故障排查分析 | auto         | 100           | 高精度分析，细节清晰    |
| 日常运营报表 | auto         | 50（默认）        | 每30分钟一个点，趋势清晰 |
| 性能压测分析 | auto         | 200           | 10分钟压测，每3秒一个点 |

## 时间范围示例

| 时间范围描述 |      startTime      |       endTime       | 自动计算结果 |
|--------|---------------------|---------------------|--------|
| 最近1小时  | 2023-01-01 10:00:00 | 2023-01-01 11:00:00 | 每1分钟   |
| 今天全天   | 2023-01-01 00:00:00 | 2023-01-01 23:59:59 | 每30分钟  |
| 最近一周   | 2023-01-01 00:00:00 | 2023-01-07 23:59:59 | 每3小时   |

## 迁移对照表

|          旧方式           |         新方式          |    优势    |
|------------------------|----------------------|----------|
| timeGrouping: "minute" | timeGrouping: "auto" | 自动适应时间范围 |
| timeGrouping: "hour"   | timeGrouping: "auto" | 数据点数量更合理 |
| timeGrouping: "day"    | timeGrouping: "auto" | 可视化效果更佳  |

## 系统限制

|  限制项  |   数值    |    说明    |
|-------|---------|----------|
| 最大数据点 | 10,000个 | 超过自动调整间隔 |
| 最小数据点 | 5个      | 保证图表可显示  |
| 默认精度  | 50个点    | 平衡性能与效果  |

## 基础示例

启用自动计算：

```
timeGrouping: "auto"
```

自定义精度：

```
timeGrouping: "auto"
targetBuckets: 100
```

保持原有固定间隔：

```
timeGrouping: "minute"
```

