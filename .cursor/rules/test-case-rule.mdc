---
description: 编写测试，修改测试，运行测试，review测试代码时必看的规则
globs: 
alwaysApply: false
---
编写测试时需要遵守以下规则

单元测试规则:
1. 编写单元测试时，你需要明确用户的意图，识别用户想要测试那部分功能，结合实际的业务逻辑代码编写测试，而不是站在高层抽象编写。
2. 编写单元测试时，不可以像mock一个计算器一样的荒谬行为，mock只能mock哪些和外部系统， 比如查询数据库，和第三方组件交互的组件。
3. 编写单元测试时，应抱有批判式思维，应该结合实际代码和业务场景思考正确的结果是什么，不能填鸭似的使测试通过，不考虑是否正确。
4. 编写单元测试时，如果测试用例较多，应该合适进行分组。
5. 执行单个单元测试的时候无比带上 -Pskip-ui 参数

集成测试规则：
1. 编写集成测试时，应该采用 testcontainer 框架模拟外部真实环境，集成测试除非必要禁止使用mock
2. 集成测试需要功能整块的所有调用逻辑，明确所有的分支情况，计划出测试用例，再审视自己的测试用例，一些多余的需要剔除掉。
3. 集成测试在验证的时候需要保持严谨。从外部来进行验证，同时需要依据里面真实实现验证是否全部符合预期行为。
4. 集成测试用例在一个类的时候用例过多时也需要分组。